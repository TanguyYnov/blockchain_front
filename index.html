<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <title>Blocs & des chaines </title>
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="./book.css">
</head>
<body data-spy="scroll" data-target="#navbarResponsive" data-gr-c-s-loaded="true">
  <!-- start home section -->
  <div class="home">
     <!-- Start navigation -->
      <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <a class="navbar-brand" href="#"><img src="https://cdn.discordapp.com/attachments/499996617361981471/671326205689200650/Logo.PNG" alt="logo"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <a href="#home" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                  <a href="#description" class="nav-link">Description</a>
                </li>
                <li class="nav-item">
                  <a href="#blockchain" class="nav-link">BC</a>
                </li>
                <li class="nav-item">
                  <a href="#livre" class="nav-link">Livre</a>
                </li>
                <li class="nav-item">
                  <a href="#team" class="nav-link">Team</a>
                </li>
                <li class="nav-item">
                  <a href="#contact" class="nav-link">Contact</a>
                </li>
            </ul>
        </div>
      </nav>
    <!-- End Navigation -->

    <!-- Start Landing page section -->
    <div class="landing">
        <div class="home-wrap">
            <div class="home-inner">
            </div>
        </div>
    </div>


    <div class="caption text-center ">
        <h1>Des blocs & des chaines </h1>
        <h3> find out more</h3>
        <a href="#description" class="btn btn btn-primary btn-lg">START NAVIGATING</a>
    </div>
    <!-- End landing page section -->
  </div>
  <!-- end home section -->

  <!-- start Description section -->
  <div id="description" class="offset">

  <div class="col-12 narrow text-center mt-5">
    <h1 class="titledesc"><strong>Description</strong></h1>
      <hr class="horiz"/>
      <p class="lead container">Ce projet est initié par Ynov Nantes Campus, fièrement propulsé par "Des Blocs & des Chaînes". Ce projet à pour but de réalisé une blockchain avec des fonctions de hachage (SHA-256) visible dans un tableau. Avec ce tableau, on va récupérer des informations sur la blockchain afin d'afficher le livre imposé "Bel-Ami" de Guy de Maupassant,ce projet à été réalisé avec la participation de Yavuz PUSKULLU en Administrateur réseau, Hugo HUET en Développeur back-end, Ilyass GAMRA en Développeur front-end, et Tanguy PELLERIN en Chef de Projet</p>
  </div>
  </div>
  <!-- end Description section -->
  <!-- start table -->
  <div id="taable" class="offset">
  <section class="bg-light page-section" id="tabeo">
    <div class="container">
      <table class="table table-striped">
        <tr class="bg-info">
          <th>Numero Block</th>
          <th>Hashage</th>
          <th>IdContributeur</th>
          <th>Nonce</th>
        </tr>
        <tbody id="myTable">

        </tbody>
      </table>
    </div>
    <div class="text-center">
        <span class="btn btn-primary" id="tab_preced">Precedent</span>
        <span class="btn btn-primary" id="tab_suiv">Suivant</span>
    </div>
  </section>
  </div>
  <!-- end table  -->
<!-- start livre pdf  -->
<div id="book" class="offset">
  <section class="bg-white page-section" id="tabeo">
    <div class="container zirax" id="container">
      <div class="book-content">
          <div class="book">
              <div class="face-front" id="portada"></div>
              <div class="face-back" id="trsf">
                  <h1>Title 1</h1>
                  <p class="pbook">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam laborum voluptatibus eaque repudiandae ullam necessitatibus, dolor ad expedita, eum praesentium vitae! Voluptate in itaque modi consequatur. Aliquid odit quisquam quibusdam!</p>
              </div>
          </div>

          <div class="book">
              <div class="face-front">
                  <p class="pbook">coucou 1Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sint perferendis nemo blanditiis impedit aut soluta quia illum deserunt, vero quod ducimus placeat voluptate quidem error sequi, earum eos minima in!</p>
              </div>
              <div class="face-back">
                  <p class="pbook">coucou 2Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam laborum voluptatibus eaque repudiandae ullam necessitatibus, dolor ad expedita, eum praesentium vitae! Voluptate in itaque modi consequatur. Aliquid odit quisquam quibusdam!</p>
              </div>
          </div>

          <div class="book">
              <div class="face-front">
                  <p class="pbook">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sint perferendis nemo blanditiis impedit aut soluta quia illum deserunt, vero quod ducimus placeat voluptate quidem error sequi, earum eos minima in!</p>
              </div>
              <div class="face-back">
                  <p class="pbook">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam laborum voluptatibus eaque repudiandae ullam necessitatibus, dolor ad expedita, eum praesentium vitae! Voluptate in itaque modi consequatur. Aliquid odit quisquam quibusdam!</p>
              </div>
          </div>

          <div class="book">
              <div class="face-front">
                  <p class="pbook">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sint perferendis nemo blanditiis impedit aut soluta quia illum deserunt, vero quod ducimus placeat voluptate quidem error sequi, earum eos minima in!</p>
              </div>
              <div class="face-back" id="portada-back">
              </div>
          </div>
      </div>
    </div>
    <div class="text-center mb-5">
        <span class="btn btn-primary" id="livre_preced">Precedent</span>
        <span class="btn btn-primary" id="livre_suiv">Suivant</span>
    </div>
  </section>
</div>
<!-- end book -->

    <script src="js/app.js"></script>
    <script src="js/pdf.js"></script>
    <script>
        var min = 0;
        var max = 10;
        var chain_arr = [];
        var table = document.getElementById('myTable')

        $( document ).ready(function() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    chain_obj = JSON.parse(xhr.responseText);
                    chain_arr = chain_obj.chain;
                    chain_arr.forEach(block => {
                        row = ` <tr>
                                    <td>${block.num_bloc}</td>
                                    <td>${block.hash}</td>
                                    <td>${block.id_contributeur}</td>
                                    <td>${block.nonce}</td>
                                </tr>`
                        if (parseInt(block.num_bloc) >= min && parseInt(block.num_bloc) < max) {
                            table.innerHTML += row
                        }
                    });
                }
            }
            xhr.open('GET', 'http://localhost:5000/chain', true);
            xhr.send(null);
        });

        $( "#tab_preced" ).click(function() {
            if (min-10 >= 0 && max-10 >= 10) {
                min -= 10;
                max -= 10;
            }
            actualize_table();
        });

        $( "#tab_suiv" ).click(function() {
            if (min+10 < chain_arr.length && max < chain_arr.length) {
                min += 10;
                max += 10;
            }
            actualize_table()
        });

        function actualize_table(){
            table.innerHTML = "";
            for (let i = min; i < max; i++) {
                row = ` <tr>
                            <td>${chain_arr[i].num_bloc}</td>
                            <td>${chain_arr[i].hash}</td>
                            <td>${chain_arr[i].id_contributeur}</td>
                            <td>${chain_arr[i].nonce}</td>
                        </tr>`
                table.innerHTML += row
            }
        }

        $( "#tab_preced" ).click(function() {
            if (min-10 >= 0 && max-10 >= 10) {
                min -= 10;
                max -= 10;
            }
            actualize_table();
        });

        $( "#tab_suiv" ).click(function() {
            if (min+10 < chain_arr.length && max < chain_arr.length) {
                min += 10;
                max += 10;
            }
            actualize_table()
        });
  </script>
</body>
</html>
